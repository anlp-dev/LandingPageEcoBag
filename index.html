<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <title>EcoBag - Your Bag. Your Story. Your Planet.</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #f0f8f0 0%, #e8f5e8 100%);
            color: #2d4a3e;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 1rem 2rem;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-size: 2rem;
            font-weight: 700;
            color: #4a9b3e;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .cart-icon {
            position: relative;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cart-icon:hover {
            color: #4a9b3e;
            transform: scale(1.1);
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .nav-links a {
            text-decoration: none;
            color: #2d4a3e;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-links a:hover {
            color: #4a9b3e;
            transform: translateY(-2px);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 0;
            background: #4a9b3e;
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Pages */
        .page {
            display: none;
            min-height: 100vh;
            padding: 100px 2rem 2rem;
            animation: fadeInPage 0.7s;
        }

        .page.active {
            display: block;
        }

        /* Home Page */
        .hero {
            position: relative;
            overflow: hidden;
            text-align: center;
            padding: 4rem 0;
            max-width: 1200px;
            margin: 0 auto;
        }

        .hero-content {
            animation: fadeInUp 1.2s 0.2s both;
            position: relative;
            z-index: 2;
        }

        .hero h1 {
            font-size: 4rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #4a9b3e, #6bb85f);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease-in-out infinite;
        }

        .hero .slogan {
            font-size: 1.5rem;
            margin-bottom: 3rem;
            color: #666;
            font-weight: 300;
        }

        .cta-button {
            background: linear-gradient(135deg, #4a9b3e, #6bb85f);
            color: white;
            padding: 1.5rem 3rem;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            box-shadow: 0 10px 30px rgba(74, 155, 62, 0.3);
            animation: popIn 1.2s 0.5s both;
        }

        .cta-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(74, 155, 62, 0.4);
        }

        .floating-elements {
            pointer-events: none;
            z-index: 1;
        }

        .floating-leaf {
            position: absolute;
            color: #4a9b3e;
            font-size: 2rem;
            animation: float 6s ease-in-out infinite, leafParallax 10s linear infinite alternate;
            opacity: 0.6;
        }

        @keyframes leafParallax {
            0% { filter: blur(0px); opacity: 0.7; }
            100% { filter: blur(2px); opacity: 0.4; }
        }

        /* Customize Page */
        .customize-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .controls-panel {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            height: fit-content;
        }

        .control-section {
            margin-bottom: 2rem;
        }

        .control-section h3 {
            color: #4a9b3e;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .color-picker {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(50px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .color-option {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .color-option:hover, .color-option.active {
            border-color: #4a9b3e;
            transform: scale(1.1);
        }

        .custom-color {
            width: 100%;
            height: 50px;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
        }

        .upload-area {
            border: 2px dashed #4a9b3e;
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            background: #f8fdf8;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-area:hover {
            background: #f0f9f0;
            border-color: #6bb85f;
        }

        .preview-container {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            position: relative;
            min-height: 500px;
        }

        #bag3d {
            width: 100%;
            height: 500px;
            border-radius: 15px;
            background: linear-gradient(135deg, #f0f8f0, #e8f5e8);
        }

        .complete-design {
            width: 100%;
            background: linear-gradient(135deg, #4a9b3e, #6bb85f);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 2rem;
            transition: all 0.3s ease;
        }

        .complete-design:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(74, 155, 62, 0.3);
        }

        /* Story Page */
        .story-form {
            max-width: 600px;
            margin: 0 auto 3rem;
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .story-form input, .story-form textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            margin-bottom: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .story-form input:focus, .story-form textarea:focus {
            outline: none;
            border-color: #4a9b3e;
        }

        .stories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .story-card {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .story-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
        }

        .story-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(74, 155, 62, 0.1), transparent);
            transition: left 0.5s;
        }

        .story-card:hover::before {
            left: 100%;
        }

        /* Products Page */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            padding: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .product-card {
            position: relative;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            animation: floatUpDown 3s ease-in-out infinite;
            animation-delay: calc(var(--card-index) * 0.1s);
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.2),
                transparent
            );
            transition: 0.5s;
        }

        .product-card:hover {
            transform: translateY(-15px) scale(1.02);
            box-shadow: 0 20px 40px rgba(74,155,62,0.2);
        }

        .product-card:hover::before {
            left: 100%;
            transition: 0.5s;
        }

        .product-image-wrapper {
            position: relative;
            padding-top: 100%;
            overflow: hidden;
            background: linear-gradient(135deg, #f0f8f0, #e8f5e8);
        }

        .product-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            filter: brightness(1);
        }

        .product-card:hover .product-image {
            transform: scale(1.1);
            filter: brightness(1.1);
        }

        .product-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(74,155,62,0.9);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            backdrop-filter: blur(4px);
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .product-card:hover .product-badge {
            opacity: 1;
            transform: translateY(0);
        }

        .product-info {
            padding: 1.5rem;
            background: white;
        }

        .product-category {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .product-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d4a3e;
            margin-bottom: 0.5rem;
            transition: color 0.3s ease;
        }

        .product-card:hover .product-title {
            color: #4a9b3e;
        }

        .product-description {
            color: #666;
            margin-bottom: 1rem;
            line-height: 1.5;
            font-size: 0.95rem;
        }

        .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid #eee;
        }

        .product-price {
            font-size: 1.4rem;
            font-weight: 700;
            color: #4a9b3e;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .old-price {
            font-size: 1rem;
            color: #999;
            text-decoration: line-through;
        }

        .add-to-cart-btn {
            background: linear-gradient(135deg, #4a9b3e, #6bb85f);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .add-to-cart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74,155,62,0.3);
        }

        .add-to-cart-btn i {
            font-size: 1.1rem;
        }

        /* Product filters */
        .product-filters {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: white;
            border: 2px solid #eee;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #666;
        }

        .filter-btn:hover, .filter-btn.active {
            background: #4a9b3e;
            border-color: #4a9b3e;
            color: white;
            transform: translateY(-2px);
        }

        /* Product sorting */
        .product-sorting {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding: 0 2rem;
        }

        .sort-select {
            padding: 0.8rem 2rem;
            border: 2px solid #eee;
            border-radius: 25px;
            font-weight: 500;
            cursor: pointer;
            background: white;
            color: #666;
            transition: all 0.3s ease;
        }

        .sort-select:hover {
            border-color: #4a9b3e;
            color: #4a9b3e;
        }

        .products-count {
            color: #666;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .product-grid {
                grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
                padding: 1rem;
            }

            .product-sorting {
                flex-direction: column;
                gap: 1rem;
                padding: 0 1rem;
            }
        }

        /* Cart Sidebar */
        .cart-sidebar {
            position: fixed;
            right: -400px;
            top: 0;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 20px rgba(0,0,0,0.1);
            z-index: 2000;
            transition: all 0.3s ease;
            overflow-y: auto;
        }

        .cart-sidebar.open {
            right: 0;
        }

        .cart-header {
            padding: 2rem;
            background: linear-gradient(135deg, #4a9b3e, #6bb85f);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-items {
            padding: 1rem;
        }

        .cart-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid #eee;
            transition: all 0.3s ease;
        }

        .cart-item:hover {
            background: #f8f8f8;
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #f0f8f0, #e8f5e8);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 600;
            color: #2d4a3e;
            margin-bottom: 0.5rem;
        }

        .cart-item-price {
            color: #4a9b3e;
            font-weight: 600;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0.5rem 0;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background: #4a9b3e;
            color: white;
            border-color: #4a9b3e;
        }

        .cart-total {
            padding: 2rem;
            border-top: 2px solid #eee;
            background: #f8f8f8;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .total-final {
            font-weight: 700;
            font-size: 1.3rem;
            color: #4a9b3e;
            border-top: 1px solid #ddd;
            padding-top: 1rem;
        }

        .checkout-btn {
            width: 100%;
            background: linear-gradient(135deg, #4a9b3e, #6bb85f);
            color: white;
            border: none;
            padding: 1.5rem;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 1rem;
            transition: all 0.3s ease;
        }

        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(74, 155, 62, 0.3);
        }

        .empty-cart {
            text-align: center;
            padding: 3rem 2rem;
            color: #666;
        }

        .empty-cart i {
            font-size: 4rem;
            color: #ddd;
            margin-bottom: 1rem;
        }
        .contact-container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .contact-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }

        .contact-method {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .contact-method:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(0,0,0,0.15);
        }

        .contact-method i {
            font-size: 3rem;
            color: #4a9b3e;
            margin-bottom: 1rem;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(10deg); }
            66% { transform: translateY(-10px) rotate(-5deg); }
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 2rem;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            position: relative;
            animation: fadeInUp 0.3s ease;
        }

        .close {
            position: absolute;
            right: 1rem;
            top: 1rem;
            font-size: 2rem;
            cursor: pointer;
            color: #999;
        }

        .close:hover {
            color: #4a9b3e;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .customize-container {
                grid-template-columns: 1fr;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .nav-links {
                flex-direction: column;
                gap: 1rem;
            }
            
            .header {
                padding: 1rem;
            }
        }

        .product-showcase {
            animation: fadeInUp 1.2s 0.2s both;
        }
        .showcase-title {
            animation: fadeInUp 1.2s 0.3s both;
        }
        .showcase-carousel {
            position: relative;
            overflow: hidden;
            width: 100%;
            margin: 0 auto;
        }
        .showcase-track {
            display: flex;
            transition: transform 0.7s cubic-bezier(.77,0,.18,1);
            will-change: transform;
        }
        .product-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
            margin: 0 1rem;
            min-width: 270px;
            max-width: 270px;
            flex: 0 0 270px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.4s, box-shadow 0.4s;
            cursor: pointer;
            animation: fadeInUp 1.2s both;
        }
        .product-card:hover {
            transform: translateY(-12px) scale(1.04) rotate(-1deg);
            box-shadow: 0 20px 60px rgba(74,155,62,0.18);
        }
        .product-img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 20px 20px 0 0;
            transition: filter 0.3s;
        }
        .product-card:hover .product-img {
            filter: brightness(1.08) saturate(1.2);
        }
        .product-info {
            padding: 1.2rem;
            text-align: center;
        }
        .product-info h3 {
            font-size: 1.2rem;
            color: #4a9b3e;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }
        .product-desc {
            color: #666;
            font-size: 0.98rem;
            margin-bottom: 0.7rem;
            min-height: 40px;
        }
        .product-price {
            color: #2d4a3e;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        .product-btn {
            background: linear-gradient(135deg, #4a9b3e, #6bb85f);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 0.7rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
            box-shadow: 0 4px 16px rgba(74,155,62,0.13);
        }
        .product-btn:hover {
            background: linear-gradient(135deg, #6bb85f, #4a9b3e);
            transform: scale(1.07);
        }
        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            font-size: 1.5rem;
            color: #4a9b3e;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            cursor: pointer;
            z-index: 2;
            transition: background 0.2s, color 0.2s;
        }
        .carousel-btn:hover {
            background: #4a9b3e;
            color: #fff;
        }
        .carousel-btn.prev { left: 0.5rem; }
        .carousel-btn.next { right: 0.5rem; }
        @media (max-width: 900px) {
            .showcase-track { gap: 0.5rem; }
            .product-card { min-width: 220px; max-width: 220px; }
        }
        @media (max-width: 600px) {
            .product-showcase { padding: 0 0.5rem; }
            .product-card { min-width: 160px; max-width: 160px; }
            .product-img { height: 110px; }
        }
        /* Section reveal on scroll */
        .reveal {
            opacity: 0;
            transform: translateY(40px);
            transition: all 0.7s cubic-bezier(.77,0,.18,1);
        }
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Enhanced Animations and Effects */
        @keyframes floatUpDown {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(74, 155, 62, 0.2); }
            50% { box-shadow: 0 0 30px rgba(74, 155, 62, 0.4); }
        }

        /* Enhanced Product Card */
        .product-card {
            position: relative;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            animation: floatUpDown 3s ease-in-out infinite;
            animation-delay: calc(var(--card-index) * 0.1s);
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.2),
                transparent
            );
            transition: 0.5s;
        }

        .product-card:hover {
            transform: translateY(-15px) scale(1.02);
            box-shadow: 0 20px 40px rgba(74,155,62,0.2);
        }

        .product-card:hover::before {
            left: 100%;
            transition: 0.5s;
        }

        .product-image-wrapper {
            position: relative;
            padding-top: 100%;
            overflow: hidden;
            background: linear-gradient(135deg, #f0f8f0, #e8f5e8);
        }

        .product-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            filter: brightness(1);
        }

        .product-card:hover .product-image {
            transform: scale(1.1);
            filter: brightness(1.1);
        }

        /* Enhanced Preview Container */
        .preview-container {
            background: linear-gradient(135deg, #ffffff, #f8f8f8);
            border-radius: 25px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            padding: 2rem;
            transition: all 0.3s ease;
            animation: pulseGlow 3s infinite;
        }

        #preview2D {
            background: linear-gradient(135deg, #f5f5f5, #ffffff);
            border: 2px solid rgba(74,155,62,0.1);
        }

        #bagBase {
            transition: all 0.3s ease;
        }

        .bag-handle {
            transition: all 0.3s ease;
        }

        /* Enhanced Color Options */
        .color-option {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .color-option::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                rgba(255,255,255,0.2) 0%,
                rgba(255,255,255,0) 100%
            );
            transform: rotate(45deg);
            transition: all 0.3s ease;
        }

        .color-option:hover::after {
            transform: rotate(225deg);
        }

        /* Footer Section */
        .footer {
            background: linear-gradient(135deg, #2d4a3e, #4a9b3e);
            color: white;
            padding: 4rem 2rem 2rem;
            margin-top: 4rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
        }

        .footer-section h3 {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            position: relative;
            padding-bottom: 0.5rem;
        }

        .footer-section h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 2px;
            background: #6bb85f;
        }

        .footer-links {
            list-style: none;
            padding: 0;
        }

        .footer-links li {
            margin-bottom: 0.8rem;
        }

        .footer-links a {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .footer-links a:hover {
            color: white;
            transform: translateX(5px);
        }

        .footer-social {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-icon {
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .social-icon:hover {
            background: white;
            color: #4a9b3e;
            transform: translateY(-3px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            font-size: 0.9rem;
            color: rgba(255,255,255,0.7);
        }

        /* New Features Menu */
        .features-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            padding: 4rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .feature-card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(74,155,62,0.2);
        }

        .feature-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #4a9b3e, #6bb85f);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            color: white;
            font-size: 2rem;
        }

        .feature-title {
            font-size: 1.3rem;
            color: #2d4a3e;
            margin-bottom: 1rem;
        }

        .feature-desc {
            color: #666;
            line-height: 1.6;
        }

        /* New Menu Styles */
        .eco-impact {
            background: linear-gradient(135deg, #f0f8f0, #e8f5e8);
            padding: 4rem 2rem;
            text-align: center;
        }

        .impact-title {
            color: #4a9b3e;
            font-size: 2.5rem;
            margin-bottom: 3rem;
        }

        .impact-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .impact-stat {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .impact-stat:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(74,155,62,0.2);
        }

        .stat-number {
            font-size: 3rem;
            font-weight: 700;
            color: #4a9b3e;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #4a9b3e, #6bb85f);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-text {
            color: #666;
            line-height: 1.6;
        }

        /* Blog Section */
        .blog-section {
            padding: 4rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .blog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .blog-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .blog-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(74,155,62,0.2);
        }

        .blog-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .blog-content {
            padding: 1.5rem;
        }

        .blog-date {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .blog-title {
            color: #2d4a3e;
            font-size: 1.3rem;
            margin-bottom: 1rem;
            line-height: 1.4;
        }

        .blog-excerpt {
            color: #666;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .read-more {
            color: #4a9b3e;
            text-decoration: none;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .read-more:hover {
            gap: 1rem;
            color: #6bb85f;
        }

        /* FAQ Section */
        .faq-section {
            padding: 4rem 2rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .faq-item {
            background: white;
            border-radius: 15px;
            margin-bottom: 1rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .faq-question {
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            font-weight: 600;
            color: #2d4a3e;
            transition: all 0.3s ease;
        }

        .faq-question:hover {
            color: #4a9b3e;
        }

        .faq-answer {
            padding: 0 1.5rem;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
            color: #666;
            line-height: 1.6;
        }

        .faq-item.active .faq-answer {
            padding: 1.5rem;
            max-height: 500px;
            border-top: 1px solid #eee;
        }

        .faq-item.active .faq-question {
            color: #4a9b3e;
        }

        /* Reviews Section */
        .reviews-section {
            padding: 4rem 2rem;
            background: linear-gradient(135deg, #f0f8f0, #e8f5e8);
        }

        .reviews-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .review-card {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin: 1rem;
            transition: all 0.3s ease;
        }

        .review-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .reviewer-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
        }

        .reviewer-info h4 {
            color: #2d4a3e;
            margin-bottom: 0.2rem;
        }

        .reviewer-info p {
            color: #666;
            font-size: 0.9rem;
        }

        .review-rating {
            color: #f39c12;
            margin-bottom: 1rem;
        }

        .review-text {
            color: #666;
            line-height: 1.6;
            font-style: italic;
        }

        /* Add to navigation */
        .nav-links li.has-submenu {
            position: relative;
        }

        .submenu {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            min-width: 200px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .nav-links li.has-submenu:hover .submenu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .submenu li {
            padding: 0.8rem 1.5rem;
            border-bottom: 1px solid #eee;
        }

        .submenu li:last-child {
            border-bottom: none;
        }

        .submenu a {
            color: #2d4a3e;
            text-decoration: none;
            display: block;
            transition: all 0.3s ease;
        }

        .submenu a:hover {
            color: #4a9b3e;
            transform: translateX(5px);
        }

        /* Products Page Enhancements */
        .products-header {
            text-align: center;
            margin: 3rem auto 4rem;
            max-width: 1200px;
            padding: 0 2rem;
            position: relative;
        }

        .products-header::after {
            content: '';
            position: absolute;
            bottom: -1rem;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, #4a9b3e, #6bb85f);
            border-radius: 3px;
        }

        .products-header h2 {
            color: #2d4a3e;
            font-size: 2.8rem;
            margin-bottom: 1rem;
            font-weight: 700;
            letter-spacing: -0.5px;
            position: relative;
            display: inline-block;
        }

        .products-header h2::before {
            content: '🌱';
            position: absolute;
            left: -3rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2rem;
        }

        .products-header h2::after {
            content: '🌿';
            position: absolute;
            right: -3rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2rem;
        }

        .products-header p {
            color: #666;
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .product-filters {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 0 auto 3rem;
            padding: 1rem;
            background: #f8f8f8;
            border-radius: 50px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            max-width: 800px;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
        }

        .filter-btn {
            background: transparent;
            border: 2px solid #eee;
            padding: 0.8rem 1.8rem;
            border-radius: 25px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #666;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-btn i {
            font-size: 1.1rem;
        }

        .filter-btn:hover, .filter-btn.active {
            background: linear-gradient(135deg, #4a9b3e, #6bb85f);
            border-color: transparent;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74,155,62,0.2);
        }

        .product-sorting {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 0 auto 2rem;
            padding: 1rem 2rem;
            max-width: 1400px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .sort-select {
            padding: 0.8rem 2rem;
            border: 2px solid #eee;
            border-radius: 25px;
            font-weight: 500;
            cursor: pointer;
            background: white;
            color: #666;
            transition: all 0.3s ease;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%234a9b3e'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1.5rem;
            padding-right: 3rem;
        }

        .sort-select:hover {
            border-color: #4a9b3e;
            color: #4a9b3e;
        }

        .products-count {
            color: #666;
            font-weight: 500;
            background: #f8f8f8;
            padding: 0.5rem 1rem;
            border-radius: 20px;
        }

        .product-grid {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .product-card {
            opacity: 0;
            animation: fadeInCard 0.6s ease forwards;
            animation-delay: calc(var(--card-index) * 0.1s);
        }

        @keyframes fadeInCard {
            to {
                opacity: 1;
            }
        }

        /* Enhanced Animations and Effects */
        @keyframes floatLeaf {
            0%, 100% { transform: rotate(0deg) translate(0, 0); }
            25% { transform: rotate(5deg) translate(5px, -5px); }
            75% { transform: rotate(-5deg) translate(-5px, 5px); }
        }

        @keyframes shine {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .products-header h2::before,
        .products-header h2::after {
            animation: floatLeaf 3s ease-in-out infinite;
        }

        .product-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 200%;
            height: 100%;
            background: linear-gradient(
                to right,
                transparent,
                rgba(255, 255, 255, 0.3),
                transparent
            );
            transform: translateX(-100%) rotate(45deg);
        }

        .product-card:hover::after {
            animation: shine 1s forwards;
        }

        /* Quick View Modal */
        .quick-view-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .quick-view-modal.active {
            opacity: 1;
        }

        .quick-view-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: white;
            padding: 2rem;
            border-radius: 20px;
            width: 90%;
            max-width: 1000px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .quick-view-modal.active .quick-view-content {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }

        .quick-view-image {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            background: #f8f8f8;
        }

        .quick-view-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .quick-view-details {
            padding: 1rem;
        }

        .quick-view-title {
            font-size: 1.8rem;
            color: #2d4a3e;
            margin-bottom: 1rem;
        }

        .quick-view-price {
            font-size: 1.5rem;
            color: #4a9b3e;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .quick-view-desc {
            color: #666;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .color-options {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            position: relative;
            transition: transform 0.3s ease;
        }

        .color-option:hover {
            transform: scale(1.2);
        }

        .color-option.active::after {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            border: 2px solid #4a9b3e;
            border-radius: 50%;
        }

        .size-options {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .size-option {
            padding: 0.5rem 1rem;
            border: 2px solid #eee;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .size-option:hover {
            border-color: #4a9b3e;
            color: #4a9b3e;
        }

        .size-option.active {
            background: #4a9b3e;
            color: white;
            border-color: #4a9b3e;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .quantity-btn {
            width: 40px;
            height: 40px;
            border: 2px solid #eee;
            border-radius: 10px;
            background: white;
            color: #4a9b3e;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background: #4a9b3e;
            color: white;
            border-color: #4a9b3e;
        }

        .quantity-input {
            width: 60px;
            height: 40px;
            border: 2px solid #eee;
            border-radius: 10px;
            text-align: center;
            font-size: 1.1rem;
        }

        .quick-view-actions {
            display: flex;
            gap: 1rem;
        }

        .quick-view-btn {
            flex: 1;
            padding: 1rem;
            border-radius: 15px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-to-cart-btn {
            background: #4a9b3e;
            color: white;
        }

        .add-to-cart-btn:hover {
            background: #3d8233;
            transform: translateY(-2px);
        }

        .wishlist-btn {
            background: #f8f8f8;
            color: #666;
        }

        .wishlist-btn:hover {
            background: #eee;
            color: #4a9b3e;
        }

        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: #666;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-modal:hover {
            color: #4a9b3e;
        }

        /* Product Card Enhancements */
        .product-card {
            position: relative;
            overflow: hidden;
        }

        .product-actions {
            position: absolute;
            top: 1rem;
            right: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .product-card:hover .product-actions {
            transform: translateX(0);
        }

        .action-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            border: none;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .action-btn:hover {
            background: #4a9b3e;
            color: white;
            transform: scale(1.1);
        }

        .product-badge {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background: rgba(74,155,62,0.9);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transform: translateY(-100%);
            transition: transform 0.3s ease;
        }

        .product-card:hover .product-badge {
            transform: translateY(0);
        }

        /* Contact Modal Styles */
        .contact-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            perspective: 1000px;
        }

        .contact-modal.active {
            opacity: 1;
        }

        .contact-modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotateX(-10deg) scale(0.9);
            background: white;
            padding: 3rem;
            border-radius: 30px;
            width: 90%;
            max-width: 600px;
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 30px 60px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .contact-modal.active .contact-modal-content {
            transform: translate(-50%, -50%) rotateX(0) scale(1);
            opacity: 1;
        }

        .contact-header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }

        .contact-header::before {
            content: '';
            position: absolute;
            top: -3rem;
            left: -3rem;
            right: -3rem;
            height: 200px;
            background: linear-gradient(135deg, #4a9b3e, #6bb85f);
            border-radius: 0 0 50% 50% / 0 0 100% 100%;
            transform: scaleX(1.2);
        }

        .contact-header h3 {
            color: white;
            font-size: 2rem;
            margin-bottom: 0.5rem;
            position: relative;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .contact-header p {
            color: rgba(255,255,255,0.9);
            font-size: 1.1rem;
            position: relative;
        }

        .contact-methods {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            margin-bottom: 3rem;
            perspective: 1000px;
        }

        @media (max-width: 768px) {
            .contact-methods {
                grid-template-columns: 1fr;
            }
        }

        .contact-method {
            position: relative;
            height: 200px;
            background: #f8f8f8;
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.3s ease;
            transform-style: preserve-3d;
            cursor: pointer;
        }

        .contact-method:hover {
            transform: translateY(-10px) rotateY(10deg);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .contact-method::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(74,155,62,0.2), rgba(107,184,95,0.2));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .contact-method:hover::before {
            opacity: 1;
        }

        .contact-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: #4a9b3e;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            transform-style: preserve-3d;
        }

        .contact-method:hover .contact-icon {
            transform: translate(-50%, -50%) rotateY(360deg) scale(1.1);
        }

        .contact-icon i {
            transition: all 0.3s ease;
        }

        .contact-method:hover .contact-icon i {
            transform: scale(1.2);
        }

        .contact-info {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 1.5rem;
            text-align: center;
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(10px);
            transform: translateY(100%);
            transition: all 0.3s ease;
        }

        .contact-method:hover .contact-info {
            transform: translateY(0);
        }

        .contact-info h4 {
            color: #2d4a3e;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }

        .contact-info p {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .contact-link {
            color: #4a9b3e;
            text-decoration: none;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease 0.1s;
        }

        .contact-method:hover .contact-link {
            opacity: 1;
            transform: translateY(0);
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 2rem;
            perspective: 1000px;
        }

        .social-link {
            position: relative;
            width: 60px;
            height: 60px;
            border-radius: 20px;
            background: #f8f8f8;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 1.5rem;
            text-decoration: none;
            transition: all 0.3s ease;
            transform-style: preserve-3d;
            transform: rotateX(0) rotateY(0);
        }

        .social-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #4a9b3e, #6bb85f);
            border-radius: 20px;
            opacity: 0;
            transition: all 0.3s ease;
            transform: translateZ(-1px);
        }

        .social-link:hover {
            transform: rotateX(10deg) rotateY(10deg) translateZ(10px);
            color: white;
        }

        .social-link:hover::before {
            opacity: 1;
        }

        .social-link i {
            position: relative;
            z-index: 1;
            transition: all 0.3s ease;
        }

        .social-link:hover i {
            transform: scale(1.2);
        }

        /* 3D Floating Animation */
        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotateX(0) rotateY(0);
            }
            25% {
                transform: translateY(-10px) rotateX(5deg) rotateY(5deg);
            }
            50% {
                transform: translateY(0) rotateX(0) rotateY(0);
            }
            75% {
                transform: translateY(10px) rotateX(-5deg) rotateY(-5deg);
            }
        }

        /* Glowing Effect */
        @keyframes glow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(74,155,62,0.3);
            }
            50% {
                box-shadow: 0 0 40px rgba(74,155,62,0.5);
            }
        }

        /* Particle Effect */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #4a9b3e;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
        }

        @keyframes particleAnimation {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 0;
            }
            50% {
                opacity: 0.5;
            }
            100% {
                transform: translate(var(--tx), var(--ty)) scale(0);
                opacity: 0;
            }
        }

        /* Close Button Animation */
        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 40px;
            height: 40px;
            border: none;
            background: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            transform: rotate(90deg);
            color: #4a9b3e;
        }

        /* Loading Animation */
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .loading-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4a9b3e;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* About Us Page Styles */
        .about-us {
            min-height: 100vh;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 5rem 0;
            perspective: 1000px;
            overflow-x: hidden;
        }

        .timeline-container {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .timeline-line {
            position: absolute;
            left: 50%;
            width: 4px;
            height: 100%;
            background: linear-gradient(to bottom, #4a9b3e, #6bb85f);
            transform: translateX(-50%);
        }

        .timeline-item {
            position: relative;
            width: 50%;
            padding: 2rem;
            transform-style: preserve-3d;
            perspective: 1000px;
        }

        .timeline-item:nth-child(odd) {
            left: 0;
            padding-right: 3rem;
        }

        .timeline-item:nth-child(even) {
            left: 50%;
            padding-left: 3rem;
        }

        .timeline-content {
            position: relative;
            padding: 2rem;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transform: rotateY(0deg);
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .timeline-item:hover .timeline-content {
            transform: rotateY(10deg) translateZ(50px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .timeline-dot {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #4a9b3e;
            border-radius: 50%;
            top: 50%;
            right: -10px;
            transform: translateY(-50%);
        }

        .timeline-item:nth-child(even) .timeline-dot {
            left: -10px;
        }

        .timeline-date {
            position: absolute;
            top: 0;
            font-size: 1.2rem;
            color: #4a9b3e;
            font-weight: 600;
        }

        .timeline-item:nth-child(odd) .timeline-date {
            right: 0;
        }

        .timeline-item:nth-child(even) .timeline-date {
            left: 0;
        }

        /* Our Impact Page Styles */
        .impact-section {
            min-height: 100vh;
            background: #f8f9fa;
            padding: 5rem 0;
            overflow: hidden;
        }

                 .impact-grid {
             display: grid;
             grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
             gap: 2.5rem;
             max-width: 1400px;
             margin: 0 auto;
             padding: 3rem 2rem;
         }

         .impact-card {
             position: relative;
             background: linear-gradient(145deg, #ffffff, #f3f3f3);
             border-radius: 30px;
             padding: 3rem 2rem;
             text-align: center;
             transform-style: preserve-3d;
             transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
             box-shadow: 20px 20px 60px #d9d9d9, -20px -20px 60px #ffffff;
         }

         .impact-card:hover {
             transform: translateY(-20px) rotateX(10deg) rotateY(10deg);
             box-shadow: 0 30px 60px rgba(0,0,0,0.2);
             background: linear-gradient(145deg, #ffffff, #ffffff);
         }

                 .impact-icon {
             font-size: 3.5rem;
             color: #4a9b3e;
             margin-bottom: 2rem;
             position: relative;
             z-index: 1;
         }

         .impact-icon::after {
             content: '';
             position: absolute;
             width: 80px;
             height: 80px;
             background: rgba(74,155,62,0.1);
             border-radius: 50%;
             top: 50%;
             left: 50%;
             transform: translate(-50%, -50%);
             z-index: -1;
             transition: all 0.3s ease;
         }

         .impact-card:hover .impact-icon::after {
             transform: translate(-50%, -50%) scale(1.2);
             background: rgba(74,155,62,0.2);
         }

         .impact-number {
             font-size: 3.5rem;
             font-weight: 700;
             background: linear-gradient(135deg, #4a9b3e, #6bb85f);
             -webkit-background-clip: text;
             -webkit-text-fill-color: transparent;
             margin-bottom: 1rem;
             position: relative;
             display: inline-block;
         }

         .impact-text {
             color: #666;
             font-size: 1.2rem;
             font-weight: 500;
             max-width: 80%;
             margin: 0 auto;
         }

        .impact-particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        /* Blog Page Styles */
        .blog-section {
            min-height: 100vh;
            background: linear-gradient(135deg, #fff, #f8f9fa);
            padding: 5rem 0;
            perspective: 1000px;
        }

                 .blog-grid {
             display: grid;
             grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
             gap: 3rem;
             max-width: 1400px;
             margin: 0 auto;
             padding: 3rem 2rem;
         }

         .blog-card {
             position: relative;
             background: white;
             border-radius: 30px;
             overflow: hidden;
             transform-style: preserve-3d;
             transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
             box-shadow: 0 10px 30px rgba(0,0,0,0.1);
             height: 100%;
             display: flex;
             flex-direction: column;
         }

         .blog-card:hover {
             transform: scale(1.03) rotateY(5deg);
             box-shadow: 0 20px 40px rgba(74,155,62,0.2);
         }

        .blog-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            transition: all 0.5s ease;
        }

        .blog-card:hover .blog-image {
            transform: scale(1.1);
        }

                 .blog-content {
             padding: 2rem;
             background: rgba(255,255,255,0.95);
             backdrop-filter: blur(10px);
             transform: translateZ(20px);
             flex: 1;
             display: flex;
             flex-direction: column;
             justify-content: space-between;
         }

         .blog-title {
             font-size: 1.5rem;
             color: #2d4a3e;
             margin-bottom: 1rem;
             font-weight: 600;
             line-height: 1.4;
             display: -webkit-box;
             -webkit-line-clamp: 2;
             -webkit-box-orient: vertical;
             overflow: hidden;
         }

         .blog-excerpt {
             color: #666;
             margin-bottom: 1.5rem;
             line-height: 1.6;
             display: -webkit-box;
             -webkit-line-clamp: 3;
             -webkit-box-orient: vertical;
             overflow: hidden;
             flex: 1;
         }

        .blog-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            color: #4a9b3e;
            font-size: 0.9rem;
        }

        .blog-author {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .author-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            object-fit: cover;
        }

        /* Floating Animation */
        @keyframes float-slow {
            0%, 100% {
                transform: translateY(0) rotateX(0) rotateY(0);
            }
            50% {
                transform: translateY(-20px) rotateX(5deg) rotateY(5deg);
            }
        }

        /* Parallax Effect */
        .parallax-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .parallax-item {
            position: absolute;
            opacity: 0.1;
        }

        .leaf1 { top: 10%; left: 10%; font-size: 3rem; animation: float-slow 8s infinite; }
        .leaf2 { top: 30%; right: 20%; font-size: 4rem; animation: float-slow 12s infinite; }
        .leaf3 { bottom: 20%; left: 15%; font-size: 5rem; animation: float-slow 10s infinite; }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <a href="#" class="logo" onclick="showPage('home')">🌱 EcoBag</a>
            <ul class="nav-links">
                <li><a href="#" onclick="showPage('home')">Trang chủ</a></li>
                <li><a href="#" onclick="showPage('products')">Sản phẩm</a></li>
                <li><a href="#" onclick="showPage('customize')">Thiết kế túi</a></li>
                <li><a href="#" onclick="showPage('story')">Câu chuyện</a></li>
                <li><a href="#" onclick="showPage('contact')">Liên hệ</a></li>
                <li>
                    <div class="cart-icon" onclick="toggleCart()">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count" id="cartCount">0</span>
                    </div>
                </li>
            </ul>
        </nav>
    </header>

    <!-- Products Page -->
    <div id="products" class="page">
        <div class="products-header">
            <h2>Sản phẩm túi vải</h2>
            <p>Khám phá bộ sưu tập túi vải thân thiện với môi trường, được thiết kế tinh tế và bền vững</p>
        </div>
        
        <div class="product-filters">
            <button class="filter-btn active" data-category="all">
                <i class="fas fa-th-large"></i> Tất cả
            </button>
            <button class="filter-btn" data-category="tote">
                <i class="fas fa-shopping-bag"></i> Túi Tote
            </button>
            <button class="filter-btn" data-category="drawstring">
                <i class="fas fa-shopping-basket"></i> Túi Rút
            </button>
            <button class="filter-btn" data-category="mini">
                <i class="fas fa-gift"></i> Túi Mini
            </button>
            <button class="filter-btn" data-category="premium">
                <i class="fas fa-star"></i> Cao cấp
            </button>
        </div>

        <div class="product-sorting">
            <select class="sort-select" id="productSort">
                <option value="default">Sắp xếp mặc định</option>
                <option value="price-asc">Giá tăng dần</option>
                <option value="price-desc">Giá giảm dần</option>
                <option value="name-asc">Tên A-Z</option>
                <option value="name-desc">Tên Z-A</option>
            </select>
            <div class="products-count">Hiển thị <span id="productsCount">0</span> sản phẩm</div>
        </div>

        <div class="product-grid" id="productsGrid">
            <!-- Products will be loaded here -->
        </div>
    </div>

    <!-- Home Page -->
    <div id="home" class="page active reveal">
        <div class="hero">
            <div class="floating-elements">
                <div class="floating-leaf" style="top: 20%; left: 10%; animation-delay: 0s;">🍃</div>
                <div class="floating-leaf" style="top: 60%; right: 15%; animation-delay: 2s;">🌿</div>
                <div class="floating-leaf" style="top: 40%; left: 80%; animation-delay: 4s;">🌱</div>
                <div class="floating-leaf" style="top: 80%; left: 20%; animation-delay: 1s;">🍀</div>
            </div>
            <div class="hero-content">
                <h1>EcoBag</h1>
                <p class="slogan">Your Bag. Your Story. Your Planet.</p>
                <p style="font-size: 1.1rem; margin-bottom: 2rem; color: #666;">
                    Tạo ra chiếc túi vải độc đáo của riêng bạn và góp phần bảo vệ môi trường
                </p>
                <a href="#" class="cta-button" onclick="showPage('products')">
                    <i class="fas fa-shopping-bag"></i> Khám phá sản phẩm
                </a>
                <a href="#" class="cta-button" onclick="showPage('customize')" style="margin-left: 1rem;">
                    <i class="fas fa-paint-brush"></i> Thiết kế túi
                </a>
            </div>
        </div>
        <!-- Product Showcase Section -->
        <section class="product-showcase reveal" style="margin: 4rem auto 0; max-width: 1200px;">
            <h2 class="showcase-title" style="text-align:center; font-size:2.5rem; color:#4a9b3e; margin-bottom:2rem; font-weight:700; letter-spacing:1px;">Sản phẩm nổi bật</h2>
            <div class="showcase-carousel">
                <div class="showcase-track">
                    <!-- Product 1 -->
                    <div class="product-card">
                        <img src="https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=400&q=80" alt="EcoBag Classic" class="product-img">
                        <div class="product-info">
                            <h3>EcoBag Classic</h3>
                            <p class="product-desc">Túi tote vải canvas bền bỉ, thiết kế tối giản, phù hợp mọi phong cách.</p>
                            <div class="product-price">199.000đ</div>
                            <button class="product-btn">Xem chi tiết</button>
                        </div>
                    </div>
                    <!-- Product 2 -->
                    <div class="product-card">
                        <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80" alt="EcoBag Pro" class="product-img">
                        <div class="product-info">
                            <h3>EcoBag Pro</h3>
                            <p class="product-desc">Túi vải nhiều ngăn, quai chắc chắn, phù hợp đi học, đi làm.</p>
                            <div class="product-price">249.000đ</div>
                            <button class="product-btn">Xem chi tiết</button>
                        </div>
                    </div>
                    <!-- Product 3 -->
                    <div class="product-card">
                        <img src="https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=400&q=80" alt="EcoBag Mini" class="product-img">
                        <div class="product-info">
                            <h3>EcoBag Mini</h3>
                            <p class="product-desc">Nhỏ gọn, tiện lợi, dễ mang theo, phù hợp đi chơi, dạo phố.</p>
                            <div class="product-price">149.000đ</div>
                            <button class="product-btn">Xem chi tiết</button>
                        </div>
                    </div>
                    <!-- Product 4 -->
                    <div class="product-card">
                        <img src="https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=400&q=80" alt="EcoBag Premium" class="product-img">
                        <div class="product-info">
                            <h3>EcoBag Premium</h3>
                            <p class="product-desc">Chất liệu cao cấp, chống nước, thiết kế sang trọng, thời thượng.</p>
                            <div class="product-price">299.000đ</div>
                            <button class="product-btn">Xem chi tiết</button>
                        </div>
                    </div>
                </div>
                <button class="carousel-btn prev" onclick="moveCarousel(-1)"><i class="fas fa-chevron-left"></i></button>
                <button class="carousel-btn next" onclick="moveCarousel(1)"><i class="fas fa-chevron-right"></i></button>
            </div>
        </section>
    </div>

    <!-- Customize Page -->
    <div id="customize" class="page reveal">
        <h2 style="text-align: center; margin-bottom: 3rem; color: #4a9b3e; font-size: 2.5rem;">Thiết kế túi của bạn</h2>
        <div class="customize-container">
            <div class="controls-panel">
                <div class="control-section">
                    <h3><i class="fas fa-palette"></i> Chọn màu sắc</h3>
                    <div class="color-picker">
                        <div class="color-option active" style="background: #4a9b3e" data-color="#4a9b3e"></div>
                        <div class="color-option" style="background: #e74c3c" data-color="#e74c3c"></div>
                        <div class="color-option" style="background: #3498db" data-color="#3498db"></div>
                        <div class="color-option" style="background: #f39c12" data-color="#f39c12"></div>
                        <div class="color-option" style="background: #9b59b6" data-color="#9b59b6"></div>
                        <div class="color-option" style="background: #34495e" data-color="#34495e"></div>
                    </div>
                    <input type="color" class="custom-color" id="customColor" value="#4a9b3e">
                </div>

                <div class="control-section">
                    <h3><i class="fas fa-image"></i> Thêm logo/hình ảnh</h3>
                    <div class="upload-area" onclick="document.getElementById('logoUpload').click()">
                        <i class="fas fa-cloud-upload-alt" style="font-size: 3rem; color: #4a9b3e; margin-bottom: 1rem;"></i>
                        <div>Nhấn để tải lên hình ảnh</div>
                        <div style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">PNG, JPG tối đa 5MB</div>
                    </div>
                    <input type="file" id="logoUpload" accept="image/*" style="display: none;">
                </div>

                <div class="control-section">
                    <h3><i class="fas fa-font"></i> Thêm văn bản</h3>
                    <input type="text" id="bagText" placeholder="Nhập văn bản trên túi..." style="width: 100%; padding: 1rem; border: 2px solid #e0e0e0; border-radius: 10px; margin-bottom: 1rem;">
                    <select id="textFont" style="width: 100%; padding: 1rem; border: 2px solid #e0e0e0; border-radius: 10px;">
                        <option value="Quicksand">Quicksand</option>
                        <option value="Arial">Arial</option>
                        <option value="Times New Roman">Times New Roman</option>
                    </select>
                </div>

                <button class="complete-design" onclick="completeDesign()">
                    <i class="fas fa-check"></i> Hoàn thành thiết kế
                </button>
            </div>

            <div class="preview-container">
                <h3 style="text-align: center; margin-bottom: 1rem; color: #4a9b3e;">
                    <i class="fas fa-eye"></i> Xem trước
                </h3>
                <div id="preview2D" style="width: 100%; height: 500px; position: relative; background: #f5f5f5; border-radius: 15px; overflow: hidden; display: flex; justify-content: center; align-items: center;">
                    <!-- Bag base -->
                    <div id="bagBase" style="position: relative; width: 300px; height: 400px; background: #4a9b3e; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
                        <!-- Handles -->
                        <div class="bag-handle" style="position: absolute; top: -20px; left: 40px; width: 60px; height: 40px; border: 8px solid #4a9b3e; border-bottom: none; border-radius: 30px 30px 0 0;"></div>
                        <div class="bag-handle" style="position: absolute; top: -20px; right: 40px; width: 60px; height: 40px; border: 8px solid #4a9b3e; border-bottom: none; border-radius: 30px 30px 0 0;"></div>
                        
                        <!-- Logo area (draggable) -->
                        <div id="logoArea" style="position: absolute; top: 20%; left: 50%; transform: translate(-50%, 0); width: 150px; height: 150px; cursor: move; background: rgba(255,255,255,0.1); border: 2px dashed rgba(255,255,255,0.3); border-radius: 10px; display: flex; justify-content: center; align-items: center;">
                            <img id="logoPreview" style="max-width: 100%; max-height: 100%; object-fit: contain; display: none;">
                            <div id="logoPlaceholder" style="color: rgba(255,255,255,0.5); text-align: center;">
                                <i class="fas fa-image" style="font-size: 2rem;"></i>
                                <div>Logo sẽ hiện ở đây</div>
                            </div>
                        </div>
                        
                        <!-- Text area (draggable) -->
                        <div id="textArea" style="position: absolute; bottom: 20%; left: 50%; transform: translate(-50%, 0); min-width: 100px; padding: 10px; cursor: move; background: rgba(255,255,255,0.1); border: 2px dashed rgba(255,255,255,0.3); border-radius: 5px;">
                            <div id="textPreview" style="color: #fff; text-align: center; font-size: 24px; min-height: 30px;">Văn bản mẫu</div>
                        </div>
                    </div>
                </div>
                <p style="text-align: center; margin-top: 1rem; color: #666; font-size: 0.9rem;">
                    <i class="fas fa-arrows-alt"></i> Kéo thả để điều chỉnh vị trí logo và text
                </p>
            </div>
        </div>
    </div>

    <!-- Story Page -->
    <div id="story" class="page reveal">
        <h2 style="text-align: center; margin-bottom: 3rem; color: #4a9b3e; font-size: 2.5rem;">Chia sẻ câu chuyện của bạn</h2>
        
        <div class="story-form">
            <h3 style="color: #4a9b3e; margin-bottom: 1rem;">
                <i class="fas fa-pen"></i> Viết câu chuyện của bạn
            </h3>
            <input type="text" id="storyName" placeholder="Tên của bạn">
            <input type="text" id="storyTitle" placeholder="Tiêu đề câu chuyện">
            <textarea id="storyContent" rows="6" placeholder="Chia sẻ câu chuyện về chiếc túi hoặc lý do bạn muốn bảo vệ môi trường..."></textarea>
            <button class="cta-button" onclick="addStory()" style="width: 100%;">
                <i class="fas fa-plus"></i> Thêm câu chuyện
            </button>
        </div>

        <div class="stories-grid" id="storiesGrid">
            <!-- Stories will be added here -->
        </div>
    </div>

    <!-- Contact Page -->
    <div id="contact" class="page reveal">
        <div class="contact-container">
            <h2 style="margin-bottom: 2rem; color: #4a9b3e; font-size: 2.5rem;">Liên hệ đặt hàng</h2>
            <p style="font-size: 1.2rem; margin-bottom: 3rem; color: #666;">
                Hãy liên hệ với chúng tôi để đặt hàng chiếc túi vải độc đáo của bạn!
            </p>

            <div class="contact-methods">
                <div class="contact-method">
                    <i class="fab fa-facebook"></i>
                    <h3>Facebook</h3>
                    <p>Fanpage: EcoBag Vietnam</p>
                    <p style="color: #666;">Nhắn tin trực tiếp</p>
                </div>

                <div class="contact-method">
                    <i class="fas fa-envelope"></i>
                    <h3>Email</h3>
                    <p>contact@ecobag.vn</p>
                    <p style="color: #666;">Gửi kèm file thiết kế</p>
                </div>

                <div class="contact-method">
                    <i class="fas fa-phone"></i>
                    <h3>Hotline</h3>
                    <p>0123 456 789</p>
                    <p style="color: #666;">Tư vấn 24/7</p>
                </div>

                <div class="contact-method">
                    <i class="fab fa-telegram"></i>
                    <h3>Zalo</h3>
                    <p>0123 456 789</p>
                    <p style="color: #666;">Chat nhanh chóng</p>
                </div>
            </div>

            <div style="background: white; padding: 2rem; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); margin-top: 3rem;">
                <h3 style="color: #4a9b3e; margin-bottom: 1rem;">
                    <i class="fas fa-info-circle"></i> Hướng dẫn đặt hàng
                </h3>
                <ol style="text-align: left; max-width: 500px; margin: 0 auto;">
                    <li style="margin-bottom: 1rem;">Thiết kế túi theo ý thích của bạn</li>
                    <li style="margin-bottom: 1rem;">Tải file thiết kế (PDF/PNG)</li>
                    <li style="margin-bottom: 1rem;">Liên hệ qua một trong các kênh trên</li>
                    <li style="margin-bottom: 1rem;">Gửi file thiết kế và thông tin đặt hàng</li>
                    <li>Chờ xác nhận và thanh toán</li>
                </ol>
            </div>
        </div>
    </div>

    <!-- Cart Sidebar -->
    <div id="cartSidebar" class="cart-sidebar">
        <div class="cart-header">
            <h3><i class="fas fa-shopping-cart"></i> Giỏ hàng</h3>
            <i class="fas fa-times" onclick="toggleCart()" style="cursor: pointer; font-size: 1.5rem;"></i>
        </div>
        <div class="cart-items" id="cartItems">
            <div class="empty-cart">
                <i class="fas fa-shopping-cart"></i>
                <h3>Giỏ hàng trống</h3>
                <p>Hãy thêm sản phẩm vào giỏ hàng nhé!</p>
            </div>
        </div>
        <div class="cart-total" id="cartTotal" style="display: none;">
            <div class="total-row">
                <span>Tổng phụ:</span>
                <span id="subtotal">0₫</span>
            </div>
            <div class="total-row">
                <span>Phí vận chuyển:</span>
                <span id="shipping">30,000₫</span>
            </div>
            <div class="total-row total-final">
                <span>Tổng cộng:</span>
                <span id="finalTotal">30,000₫</span>
            </div>
            <button class="checkout-btn" onclick="checkout()">
                <i class="fas fa-credit-card"></i> Thanh toán
            </button>
        </div>
    </div>

    <!-- Modal for completed design -->
    <div id="designModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 style="color: #4a9b3e; margin-bottom: 2rem; text-align: center;">
                <i class="fas fa-check-circle"></i> Thiết kế hoàn thành!
            </h2>
            <div style="text-align: center;">
                <p style="margin-bottom: 2rem;">Thiết kế của bạn đã sẵn sàng. Hãy tải file và liên hệ với chúng tôi để đặt hàng.</p>
                <button class="cta-button" onclick="downloadDesign()" style="margin-right: 1rem;">
                    <i class="fas fa-download"></i> Tải file thiết kế
                </button>
                <button class="cta-button" onclick="showPage('contact'); closeModal();">
                    <i class="fas fa-phone"></i> Liên hệ đặt hàng
                </button>
            </div>
        </div>
    </div>

    <!-- Add Features Section to Home Page -->
    <section class="features-menu reveal">
        <div class="feature-card">
            <div class="feature-icon">
                <i class="fas fa-leaf"></i>
            </div>
            <h3 class="feature-title">Thân thiện môi trường</h3>
            <p class="feature-desc">Sử dụng vật liệu tái chế và có thể phân hủy sinh học, góp phần bảo vệ môi trường.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">
                <i class="fas fa-paint-brush"></i>
            </div>
            <h3 class="feature-title">Thiết kế độc đáo</h3>
            <p class="feature-desc">Tự do sáng tạo với công cụ thiết kế trực quan, tạo nên sản phẩm độc nhất.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">
                <i class="fas fa-heart"></i>
            </div>
            <h3 class="feature-title">Chất lượng cao cấp</h3>
            <p class="feature-desc">Sử dụng chất liệu bền bỉ, may chắc chắn, đảm bảo sử dụng lâu dài.</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">
                <i class="fas fa-truck"></i>
            </div>
            <h3 class="feature-title">Giao hàng nhanh chóng</h3>
            <p class="feature-desc">Đơn hàng được xử lý và giao đến tay bạn trong thời gian ngắn nhất.</p>
        </div>
    </section>

    <!-- Add to navigation menu -->
    <li class="has-submenu">
        <a href="#">Blog <i class="fas fa-chevron-down"></i></a>
        <ul class="submenu">
            <li><a href="#"><i class="fas fa-leaf"></i> Eco Tips</a></li>
            <li><a href="#"><i class="fas fa-recycle"></i> Sustainability</a></li>
            <li><a href="#"><i class="fas fa-tshirt"></i> Fashion</a></li>
            <li><a href="#"><i class="fas fa-newspaper"></i> News</a></li>
        </ul>
    </li>

    <!-- Add new sections to Home page -->
    <section class="eco-impact reveal">
        <div class="section-header text-center">
            <span class="section-badge">Tác động xanh</span>
            <h2 class="section-title">Tác động của chúng tôi</h2>
            <p class="section-subtitle">Những con số ấn tượng về đóng góp cho môi trường</p>
        </div>
        <div class="impact-grid">
            <div class="impact-card" data-aos="fade-up" data-aos-delay="100">
                <div class="impact-icon-wrapper">
                    <div class="impact-icon">
                        <i class="fas fa-seedling fa-2x"></i>
                    </div>
                </div>
                <div class="impact-content">
                    <div class="impact-number" data-target="50000">0</div>
                    <div class="impact-label">Cây xanh được trồng</div>
                    <div class="impact-description">Góp phần tạo nên một môi trường xanh sạch đẹp</div>
                </div>
            </div>
            <div class="impact-card" data-aos="fade-up" data-aos-delay="200">
                <div class="impact-icon-wrapper">
                    <div class="impact-icon">
                        <i class="fas fa-recycle fa-2x"></i>
                    </div>
                </div>
                <div class="impact-content">
                    <div class="impact-number" data-target="100000">0</div>
                    <div class="impact-label">Kg rác nhựa giảm thiểu</div>
                    <div class="impact-description">Giảm thiểu rác thải nhựa ra môi trường</div>
                </div>
            </div>
            <div class="impact-card" data-aos="fade-up" data-aos-delay="300">
                <div class="impact-icon-wrapper">
                    <div class="impact-icon">
                        <i class="fas fa-heart fa-2x"></i>
                    </div>
                </div>
                <div class="impact-content">
                    <div class="impact-number" data-target="75000">0</div>
                    <div class="impact-label">Khách hàng tin dùng</div>
                    <div class="impact-description">Cộng đồng người dùng thân thiện với môi trường</div>
                </div>
            </div>
        </div>
    </section>

    <section class="faq-section reveal">
        <h2 style="text-align: center; color: #4a9b3e; font-size: 2.5rem; margin-bottom: 2rem;">Câu hỏi thường gặp</h2>
        <div class="faq-item">
            <div class="faq-question">
                Làm thế nào để giặt túi vải đúng cách?
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer">
                Giặt túi vải bằng nước lạnh hoặc ấm, tránh sử dụng nước nóng. Có thể giặt máy ở chế độ nhẹ nhàng. Phơi khô tự nhiên và tránh phơi trực tiếp dưới ánh nắng mặt trời để bảo vệ màu sắc.
            </div>
        </div>
        <div class="faq-item">
            <div class="faq-question">
                Thời gian giao hàng mất bao lâu?
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer">
                Thời gian giao hàng thông thường từ 2-3 ngày làm việc đối với khu vực nội thành và 3-5 ngày làm việc đối với khu vực ngoại thành.
            </div>
        </div>
        <div class="faq-item">
            <div class="faq-question">
                Có thể tùy chỉnh kích thước túi không?
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer">
                Có, chúng tôi cung cấp dịch vụ tùy chỉnh kích thước theo yêu cầu. Vui lòng liên hệ với chúng tôi để được tư vấn chi tiết.
            </div>
        </div>
    </section>

    <section class="reviews-section reveal">
        <h2 style="text-align: center; color: #4a9b3e; font-size: 2.5rem; margin-bottom: 2rem;">Đánh giá từ khách hàng</h2>
        <div class="reviews-container">
            <div class="review-card">
                <div class="review-header">
                    <img src="https://i.pravatar.cc/150?img=1" alt="Avatar" class="reviewer-avatar">
                    <div class="reviewer-info">
                        <h4>Nguyễn Thị Mai</h4>
                        <p>Khách hàng thân thiết</p>
                    </div>
                </div>
                <div class="review-rating">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                </div>
                <p class="review-text">
                    "Túi vải chất lượng cao, thiết kế đẹp và rất thân thiện với môi trường. Tôi rất hài lòng với sản phẩm và dịch vụ của EcoBag!"
                </p>
            </div>
        </div>
    </section>

    <!-- Add Quick View Modal -->
    <div class="quick-view-modal" id="quickViewModal">
        <div class="quick-view-content">
            <button class="close-modal" onclick="closeQuickView()">×</button>
            <div class="quick-view-image">
                <img src="" alt="Product Image" id="quickViewImage">
            </div>
            <div class="quick-view-details">
                <h3 class="quick-view-title" id="quickViewTitle"></h3>
                <div class="quick-view-price" id="quickViewPrice"></div>
                <p class="quick-view-desc" id="quickViewDesc"></p>
                
                <div class="color-options">
                    <div class="color-option active" style="background: #4a9b3e"></div>
                    <div class="color-option" style="background: #2d4a3e"></div>
                    <div class="color-option" style="background: #6bb85f"></div>
                </div>
                
                <div class="size-options">
                    <button class="size-option active">S</button>
                    <button class="size-option">M</button>
                    <button class="size-option">L</button>
                </div>
                
                <div class="quantity-selector">
                    <button class="quantity-btn" onclick="updateQuantity(-1)">-</button>
                    <input type="number" class="quantity-input" value="1" min="1" max="99" id="quantityInput">
                    <button class="quantity-btn" onclick="updateQuantity(1)">+</button>
                </div>
                
                <div class="quick-view-actions">
                    <button class="quick-view-btn add-to-cart-btn">
                        <i class="fas fa-shopping-cart"></i> Thêm vào giỏ
                    </button>
                    <button class="quick-view-btn wishlist-btn">
                        <i class="fas fa-heart"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Contact Modal -->
    <div class="contact-modal" id="contactModal">
        <div class="contact-modal-content">
            <div class="particles"></div>
            <button class="close-modal" onclick="closeContactModal()">×</button>
            <div class="contact-header">
                <h3>Liên hệ với chúng tôi</h3>
                <p>Chọn phương thức liên hệ phù hợp</p>
            </div>
            <div class="contact-methods">
                <div class="contact-method" onclick="window.open('https://m.me/ecobag', '_blank')">
                    <div class="contact-icon">
                        <i class="fab fa-facebook-messenger"></i>
                    </div>
                    <div class="contact-info">
                        <h4>Messenger</h4>
                        <p>Chat với chúng tôi</p>
                        <span class="contact-link">Nhắn tin <i class="fas fa-arrow-right"></i></span>
                    </div>
                </div>
                
                <div class="contact-method" onclick="window.location.href='tel:0123456789'">
                    <div class="contact-icon">
                        <i class="fas fa-phone-alt"></i>
                    </div>
                    <div class="contact-info">
                        <h4>Hotline</h4>
                        <p>0123.456.789</p>
                        <span class="contact-link">Gọi ngay <i class="fas fa-arrow-right"></i></span>
                    </div>
                </div>
                
                <div class="contact-method" onclick="window.open('https://zalo.me/ecobag', '_blank')">
                    <div class="contact-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <div class="contact-info">
                        <h4>Zalo</h4>
                        <p>Chat và đặt hàng</p>
                        <span class="contact-link">Nhắn Zalo <i class="fas fa-arrow-right"></i></span>
                    </div>
                </div>
            </div>
            
            <div class="social-links">
                <a href="https://facebook.com/ecobag" target="_blank" class="social-link">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="https://instagram.com/ecobag" target="_blank" class="social-link">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://tiktok.com/@ecobag" target="_blank" class="social-link">
                    <i class="fab fa-tiktok"></i>
                </a>
                <a href="https://youtube.com/ecobag" target="_blank" class="social-link">
                    <i class="fab fa-youtube"></i>
                </a>
            </div>
            
            <div class="loading-overlay">
                <div class="loading-spinner"></div>
            </div>
        </div>
    </div>

    <!-- About Us Section -->
    <section class="about-us" id="about">
        <div class="parallax-bg">
            <span class="parallax-item leaf1">🌿</span>
            <span class="parallax-item leaf2">🌱</span>
            <span class="parallax-item leaf3">🍃</span>
        </div>
        <div class="timeline-container">
            <div class="timeline-line"></div>
            <div class="timeline-item">
                <div class="timeline-content">
                    <div class="timeline-date">03/2025</div>
                    <h3>Khởi đầu hành trình</h3>
                    <p>EcoBag ra đời với sứ mệnh tiên phong trong việc cung cấp các giải pháp túi thân thiện với môi trường.</p>
                </div>
                <div class="timeline-dot"></div>
            </div>
            <div class="timeline-item">
                <div class="timeline-content">
                    <div class="timeline-date">06/2025</div>
                    <h3>Phát triển sản phẩm</h3>
                    <p>Ra mắt dòng sản phẩm đầu tiên với các mẫu túi eco-friendly độc đáo và sáng tạo.</p>
                </div>
                <div class="timeline-dot"></div>
            </div>
            <div class="timeline-item">
                <div class="timeline-content">
                    <div class="timeline-date">Q4/2025</div>
                    <h3>Mở rộng thị trường</h3>
                    <p>Phát triển kênh phân phối online và offline, đưa sản phẩm đến gần hơn với người tiêu dùng.</p>
                </div>
                <div class="timeline-dot"></div>
            </div>
            <div class="timeline-item">
                <div class="timeline-content">
                    <div class="timeline-date">2026</div>
                    <h3>Đổi mới sáng tạo</h3>
                    <p>Nghiên cứu và phát triển các dòng sản phẩm mới, tích hợp công nghệ và thiết kế hiện đại.</p>
                </div>
                <div class="timeline-dot"></div>
            </div>
            <div class="timeline-item">
                <div class="timeline-content">
                    <div class="timeline-date">2027</div>
                    <h3>Tầm nhìn tương lai</h3>
                    <p>Trở thành thương hiệu túi thân thiện môi trường hàng đầu, góp phần xây dựng lối sống xanh bền vững.</p>
                </div>
                <div class="timeline-dot"></div>
            </div>
        </div>
    </section>

    <!-- Add Footer -->
    <footer class="footer">
      <div class="footer-content">
          <div class="footer-section">
              <h3>Về EcoBag</h3>
              <p style="color: rgba(255,255,255,0.8); line-height: 1.6;">
                  Chúng tôi là thương hiệu túi vải thân thiện môi trường, 
                  mang đến giải pháp mua sắm bền vững và phong cách.
              </p>
              <div class="footer-social">
                  <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                  <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                  <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                  <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
              </div>
          </div>
          
          <div class="footer-section">
              <h3>Liên kết nhanh</h3>
              <ul class="footer-links">
                  <li><a href="#"><i class="fas fa-chevron-right"></i> Trang chủ</a></li>
                  <li><a href="#"><i class="fas fa-chevron-right"></i> Sản phẩm</a></li>
                  <li><a href="#"><i class="fas fa-chevron-right"></i> Thiết kế túi</a></li>
                  <li><a href="#"><i class="fas fa-chevron-right"></i> Câu chuyện</a></li>
                  <li><a href="#"><i class="fas fa-chevron-right"></i> Liên hệ</a></li>
              </ul>
          </div>
          
          <div class="footer-section">
              <h3>Chính sách</h3>
              <ul class="footer-links">
                  <li><a href="#"><i class="fas fa-chevron-right"></i> Chính sách bảo mật</a></li>
                  <li><a href="#"><i class="fas fa-chevron-right"></i> Điều khoản sử dụng</a></li>
                  <li><a href="#"><i class="fas fa-chevron-right"></i> Chính sách đổi trả</a></li>
                  <li><a href="#"><i class="fas fa-chevron-right"></i> Chính sách vận chuyển</a></li>
              </ul>
          </div>
          
          <div class="footer-section">
              <h3>Liên hệ</h3>
              <ul class="footer-links">
                  <li><i class="fas fa-map-marker-alt"></i> 123 Đường ABC, Quận XYZ, TP.HCM</li>
                  <li><i class="fas fa-phone"></i> 0123 456 789</li>
                  <li><i class="fas fa-envelope"></i> contact@ecobag.vn</li>
              </ul>
          </div>
      </div>
      
      <div class="footer-bottom">
          <p>&copy; 2024 EcoBag. Tất cả quyền được bảo lưu.</p>
      </div>
  </footer>

    <script>
        // Global variables
        let scene, camera, renderer, bag, controls;
        let bagColor = '#4a9b3e';
        let bagTexture = null;
        let bagText = '';
        let bagFont = 'Quicksand';
        let cart = [];
        let products = [];
        let currentBagMesh;
        let currentLogoMesh;
        let currentTextMesh;

        // Products data
        const productsData = [
            {
                id: 1,
                name: 'Túi Tote Cơ Bản',
                description: 'Túi tote cotton organic, size trung bình, phù hợp mọi hoạt động hàng ngày',
                price: 89000,
                emoji: '🛍️',
                category: 'tote'
            },
            {
                id: 2,
                name: 'Túi Tote Cao Cấp',
                description: 'Túi tote canvas dày, có túi nhỏ bên trong, quai cầm chắc chắn',
                price: 129000,
                emoji: '👜',
                category: 'tote'
            },
            {
                id: 3,
                name: 'Túi Drawstring',
                description: 'Túi rút cotton, nhỏ gọn, phù hợp đi gym, du lịch',
                price: 65000,
                emoji: '🎒',
                category: 'drawstring'
            },
            {
                id: 4,
                name: 'Túi Zip Canvas',
                description: 'Túi canvas có khóa zip, nhiều ngăn, tiện dụng cho công việc',
                price: 149000,
                emoji: '💼',
                category: 'zip'
            },
            {
                id: 5,
                name: 'Túi Mini Dễ Thương',
                description: 'Túi nhỏ xinh, phù hợp làm quà tặng hoặc đựng đồ nhỏ',
                price: 49000,
                emoji: '🎁',
                category: 'mini'
            },
            {
                id: 6,
                name: 'Túi Tote Jumbo',
                description: 'Túi size lớn, phù hợp đi chợ, mua sắm số lượng nhiều',
                price: 169000,
                emoji: '🛒',
                category: 'jumbo'
            },
            {
                id: 7,
                name: 'Bộ 3 Túi Combo',
                description: 'Combo 3 túi size khác nhau: nhỏ, vừa, lớn với giá ưu đãi',
                price: 199000,
                emoji: '📦',
                category: 'combo'
            },
            {
                id: 8,
                name: 'Túi Vải Lanh Cao Cấp',
                description: 'Túi vải lanh tự nhiên, thông thoáng, phong cách vintage',
                price: 189000,
                emoji: '🌾',
                category: 'linen'
            }
        ];

        // Initialize 3D scene with realistic bag
        function init3D() {
            const container = document.getElementById('bag3d');
            if (!container) return;
            
            // Scene setup
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xf0f8f0);
            
            // Camera setup
            camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.set(0, 0, 5);
            
            // Renderer setup
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            container.innerHTML = ''; // Clear previous renderer if any
            container.appendChild(renderer.domElement);
            
            // Controls setup
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.minDistance = 3;
            controls.maxDistance = 8;
            controls.maxPolarAngle = Math.PI / 1.5;
            
            // Lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);
            
            const dirLight1 = new THREE.DirectionalLight(0xffffff, 0.8);
            dirLight1.position.set(5, 10, 7);
            dirLight1.castShadow = true;
            dirLight1.shadow.mapSize.width = 1024;
            dirLight1.shadow.mapSize.height = 1024;
            scene.add(dirLight1);
            
            const dirLight2 = new THREE.DirectionalLight(0xffffff, 0.5);
            dirLight2.position.set(-5, 5, -7);
            scene.add(dirLight2);
            
            const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444, 0.4);
            scene.add(hemiLight);
            
            // Create initial bag
            createBag();
            
            // Start animation loop
            animate();
        }

        function createBag() {
            // Remove existing meshes
            if (currentBagMesh) scene.remove(currentBagMesh);
            if (currentLogoMesh) scene.remove(currentLogoMesh);
            if (currentTextMesh) scene.remove(currentTextMesh);
            
            // Bag body shape
            const shape = new THREE.Shape();
            const w = 1.1, h = 1.5, r = 0.25;
            
            // Create rounded rectangle shape
            shape.moveTo(-w + r, -h);
            shape.lineTo(w - r, -h);
            shape.quadraticCurveTo(w, -h, w, -h + r);
            shape.lineTo(w, h - r);
            shape.quadraticCurveTo(w, h, w - r, h);
            shape.lineTo(-w + r, h);
            shape.quadraticCurveTo(-w, h, -w, h - r);
            shape.lineTo(-w, -h + r);
            shape.quadraticCurveTo(-w, -h, -w + r, -h);
            
            // Extrude settings for 3D effect
            const extrudeSettings = {
                depth: 0.22,
                bevelEnabled: true,
                bevelThickness: 0.07,
                bevelSize: 0.09,
                bevelSegments: 4,
                steps: 1
            };
            
            const geometry = new THREE.ExtrudeGeometry(shape, extrudeSettings);
            
            // Create basic material first
            const material = new THREE.MeshPhongMaterial({
                color: bagColor,
                shininess: 10,
                specular: 0x333333
            });
            
            // Create bag mesh immediately with basic material
            currentBagMesh = new THREE.Mesh(geometry, material);
            currentBagMesh.castShadow = true;
            currentBagMesh.receiveShadow = true;
            scene.add(currentBagMesh);
            
            // Create handles
            createHandles();
            
            // Try to load fabric texture
            const textureLoader = new THREE.TextureLoader();
            textureLoader.load(
                'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z8BQDwAEhQGAhKmMIQAAAABJRU5ErkJggg==', // Simple 1x1 pixel texture
                (fabricTexture) => {
                    fabricTexture.wrapS = fabricTexture.wrapT = THREE.RepeatWrapping;
                    fabricTexture.repeat.set(5, 8);
                    
                    // Update material with texture
                    currentBagMesh.material.map = fabricTexture;
                    currentBagMesh.material.bumpMap = fabricTexture;
                    currentBagMesh.material.bumpScale = 0.02;
                    currentBagMesh.material.needsUpdate = true;
                    
                    // Update logo and text if they exist
                    if (bagTexture) updateLogo();
                    if (bagText) updateText();
                },
                undefined, // onProgress callback not needed
                (error) => {
                    console.log('Error loading texture:', error);
                    // Bag is still visible with basic material even if texture fails to load
                }
            );
        }

        function createHandles() {
            const handleGeo = new THREE.TorusGeometry(0.38, 0.045, 16, 32, Math.PI);
            const handleMat = new THREE.MeshPhongMaterial({
                color: bagColor,
                shininess: 30,
                specular: 0x666666
            });
            
            // Remove existing handles if any
            scene.children = scene.children.filter(child => !child.isHandle);
            
            const handle1 = new THREE.Mesh(handleGeo, handleMat);
            handle1.position.set(-0.5, 1.5, 0.13);
            handle1.rotation.set(Math.PI/2, 0, Math.PI/7);
            handle1.castShadow = true;
            handle1.isHandle = true; // Mark as handle for easy removal
            scene.add(handle1);
            
            const handle2 = handle1.clone();
            handle2.position.x = 0.5;
            handle2.rotation.z = -Math.PI/7;
            handle2.isHandle = true;
            scene.add(handle2);
        }

        function updateLogo() {
            if (!bagTexture || !scene) return;
            
            // Remove existing logo if any
            if (currentLogoMesh) {
                scene.remove(currentLogoMesh);
                currentLogoMesh = null;
            }
            
            const textureLoader = new THREE.TextureLoader();
            textureLoader.load(bagTexture, (texture) => {
                // Create a plane geometry that faces forward
                const logoGeo = new THREE.PlaneGeometry(0.7, 0.7);
                const logoMat = new THREE.MeshBasicMaterial({
                    map: texture,
                    transparent: true,
                    opacity: 0.9,
                    side: THREE.DoubleSide,
                    depthWrite: true,
                    depthTest: true
                });
                
                currentLogoMesh = new THREE.Mesh(logoGeo, logoMat);
                // Position slightly in front of the bag
                currentLogoMesh.position.set(0, 0.3, 0.15);
                currentLogoMesh.renderOrder = 1; // Ensure logo renders on top
                scene.add(currentLogoMesh);
            });
        }

        function updateText() {
            if (!bagText || !scene) return;
            
            // Remove existing text if any
            if (currentTextMesh) {
                scene.remove(currentTextMesh);
                currentTextMesh = null;
            }
            
            const canvas = document.createElement('canvas');
            canvas.width = 512;
            canvas.height = 128;
            const ctx = canvas.getContext('2d');
            
            // Clear canvas with transparent background
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Create gradient text
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, 0);
            gradient.addColorStop(0, '#2d4a3e');
            gradient.addColorStop(1, '#4a9b3e');
            
            // Set text style
            ctx.font = `bold 48px ${bagFont}`;
            ctx.fillStyle = gradient;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            // Draw text
            ctx.fillText(bagText, canvas.width/2, canvas.height/2);
            
            // Create texture from canvas
            const textTexture = new THREE.CanvasTexture(canvas);
            textTexture.needsUpdate = true;
            
            // Create material and geometry
            const textMat = new THREE.MeshBasicMaterial({
                map: textTexture,
                transparent: true,
                opacity: 0.9,
                side: THREE.DoubleSide,
                depthWrite: true,
                depthTest: true
            });
            
            const textGeo = new THREE.PlaneGeometry(1, 0.25);
            currentTextMesh = new THREE.Mesh(textGeo, textMat);
            // Position slightly in front of the bag
            currentTextMesh.position.set(0, -0.7, 0.15);
            currentTextMesh.renderOrder = 1; // Ensure text renders on top
            scene.add(currentTextMesh);
        }

        function animate() {
            requestAnimationFrame(animate);
            if (controls) controls.update();
            if (renderer && scene && camera) {
                renderer.render(scene, camera);
            }
        }

        // Update bag appearance
        function updateBagColor(color) {
            bagColor = color;
            if (currentBagMesh && currentBagMesh.material) {
                currentBagMesh.material.color.setStyle(color);
                currentBagMesh.material.needsUpdate = true;
            }
            // Update handles color
            scene.children.forEach(child => {
                if (child.isHandle && child.material) {
                    child.material.color.setStyle(color);
                    child.material.needsUpdate = true;
                }
            });
        }

        // Page navigation
        function showPage(pageName) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageName).classList.add('active');

            if (pageName === 'customize') {
                initializePreview();
            }
        }

        // Color picker functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Color options
            document.querySelectorAll('.color-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    const color = this.getAttribute('data-color');
                    updateBagColor(color);
                });
            });

            // Custom color picker
            document.getElementById('customColor').addEventListener('change', function() {
                updateBagColor(this.value);
                document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('active'));
            });

            // Logo upload
            document.getElementById('logoUpload').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        bagTexture = event.target.result;
                        updateLogo();
                        showNotification('Logo đã được tải lên!', 'success');
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Text input with debounce
            let textTimeout;
            document.getElementById('bagText').addEventListener('input', function() {
                clearTimeout(textTimeout);
                const text = this.value;
                textTimeout = setTimeout(() => {
                    bagText = text;
                    updateText();
                }, 300); // Wait 300ms after user stops typing
            });

            // Font selection
            document.getElementById('textFont').addEventListener('change', function() {
                bagFont = this.value;
                if (bagText) updateText();
            });

            // Initialize default stories
            initializeStories();
        });

        // Complete design function
        function completeDesign() {
            document.getElementById('designModal').style.display = 'block';
        }

        // Close modal
        function closeModal() {
            document.getElementById('designModal').style.display = 'none';
        }

        // Download design
        function downloadDesign() {
            // Create a canvas to render the design
            const canvas = document.createElement('canvas');
            canvas.width = 800;
            canvas.height = 600;
            const ctx = canvas.getContext('2d');

            // Draw background
            ctx.fillStyle = '#f0f8f0';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw bag representation
            ctx.fillStyle = bagColor;
            ctx.fillRect(200, 150, 400, 300);

            // Add text if any
            if (bagText) {
                ctx.fillStyle = '#333';
                ctx.font = `30px ${bagFont}`;
                ctx.textAlign = 'center';
                ctx.fillText(bagText, 400, 300);
            }

            // Add title
            ctx.fillStyle = '#4a9b3e';
            ctx.font = 'bold 40px Quicksand';
            ctx.textAlign = 'center';
            ctx.fillText('EcoBag Design', 400, 50);

            // Download
            const link = document.createElement('a');
            link.download = 'ecobag-design.png';
            link.href = canvas.toDataURL();
            link.click();

            showNotification('File thiết kế đã được tải xuống!', 'success');
        }

        // Story functionality
        let stories = [];

        function initializeStories() {
            stories = [
                {
                    name: 'Mai Anh',
                    title: 'Túi vải đầu tiên của tôi',
                    content: 'Từ khi sử dụng túi vải, tôi đã giảm được hàng trăm túi nilon mỗi năm. Chiếc túi nhỏ này mang trong mình một ý nghĩa lớn cho hành tinh xanh.'
                },
                {
                    name: 'Hoàng Nam',
                    title: 'Món quà ý nghĩa',
                    content: 'Tôi thiết kế túi vải với hình ảnh gia đình để tặng mẹ. Mẹ rất thích và luôn mang theo khi đi chợ. Đây là cách nhỏ để thể hiện tình yêu và bảo vệ môi trường.'
                },
                {
                    name: 'Thu Hà',
                    title: 'Hành trình xanh',
                    content: 'Bắt đầu từ việc sử dụng túi vải, giờ cả gia đình tôi đều có ý thức hơn về bảo vệ môi trường. Chúng tôi cùng nhau xây dựng lối sống bền vững.'
                }
            ];
            renderStories();
        }

        function addStory() {
            const name = document.getElementById('storyName').value.trim();
            const title = document.getElementById('storyTitle').value.trim();
            const content = document.getElementById('storyContent').value.trim();

            if (!name || !title || !content) {
                showNotification('Vui lòng điền đầy đủ thông tin!', 'error');
                return;
            }

            stories.unshift({ name, title, content });
            renderStories();

            // Clear form
            document.getElementById('storyName').value = '';
            document.getElementById('storyTitle').value = '';
            document.getElementById('storyContent').value = '';

            showNotification('Câu chuyện đã được thêm thành công!', 'success');
        }

        function renderStories() {
            const grid = document.getElementById('storiesGrid');
            grid.innerHTML = '';

            stories.forEach((story, index) => {
                const card = document.createElement('div');
                card.className = 'story-card';
                card.innerHTML = `
                    <h4 style="color: #4a9b3e; margin-bottom: 0.5rem; font-size: 1.3rem;">${story.title}</h4>
                    <p style="color: #666; margin-bottom: 1rem; font-size: 0.9rem;">bởi ${story.name}</p>
                    <p style="line-height: 1.6;">${story.content}</p>
                    <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #eee; color: #4a9b3e;">
                        <i class="fas fa-heart"></i> <span style="font-size: 0.9rem;">Cảm ơn bạn đã chia sẻ!</span>
                    </div>
                `;
                
                // Add stagger animation
                card.style.animationDelay = `${index * 0.1}s`;
                card.style.animation = 'fadeInUp 0.6s ease forwards';
                
                grid.appendChild(card);
            });
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: ${type === 'success' ? '#4a9b3e' : type === 'error' ? '#e74c3c' : '#3498db'};
                color: white;
                padding: 1rem 2rem;
                border-radius: 10px;
                box-shadow: 0 5px 20px rgba(0,0,0,0.2);
                z-index: 3000;
                animation: slideInRight 0.3s ease forwards;
            font-weight: 500;
            `;
            notification.textContent = message;

            // Add slide animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideInRight {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOutRight {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
            `;
            document.head.appendChild(style);

            document.body.appendChild(notification);

            // Auto remove after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease forwards';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Smooth scrolling and animations on scroll
        window.addEventListener('scroll', function() {
            const header = document.querySelector('.header');
            if (window.scrollY > 100) {
                header.style.background = 'rgba(255, 255, 255, 0.98)';
                header.style.boxShadow = '0 2px 30px rgba(0,0,0,0.15)';
            } else {
                header.style.background = 'rgba(255, 255, 255, 0.95)';
                header.style.boxShadow = '0 2px 20px rgba(0,0,0,0.1)';
            }
        });

        // Initialize floating animation
        function initFloatingAnimation() {
            const leaves = document.querySelectorAll('.floating-leaf');
            leaves.forEach((leaf, index) => {
                leaf.addEventListener('animationiteration', function() {
                    // Randomize position slightly on each iteration
                    const randomX = Math.random() * 10 - 5;
                    const randomY = Math.random() * 10 - 5;
                    this.style.transform += ` translate(${randomX}px, ${randomY}px)`;
                });
            });
        }

        // Contact method interactions
        document.addEventListener('DOMContentLoaded', function() {
            const contactMethods = document.querySelectorAll('.contact-method');
            contactMethods.forEach(method => {
                method.addEventListener('click', function() {
                    const title = this.querySelector('h3').textContent;
                    let message = '';
                    
                    switch(title) {
                        case 'Facebook':
                            message = 'Đang chuyển hướng đến Fanpage Facebook...';
                            break;
                        case 'Email':
                            message = 'Đang mở ứng dụng email...';
                            window.location.href = 'mailto:contact@ecobag.vn?subject=Đặt hàng túi vải EcoBag';
                            break;
                        case 'Hotline':
                            message = 'Đang gọi hotline...';
                            window.location.href = 'tel:0123456789';
                            break;
                        case 'Zalo':
                            message = 'Đang mở Zalo...';
                            break;
                    }
                    
                    if (message) {
                        showNotification(message, 'info');
                    }
                });
            });
        });

        // Window resize handler for 3D canvas
        window.addEventListener('resize', function() {
            if (renderer && camera) {
                const container = document.getElementById('bag3d');
                if (container) {
                    camera.aspect = container.clientWidth / container.clientHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(container.clientWidth, container.clientHeight);
                }
            }
        });

        // Initialize animations when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initFloatingAnimation();
            
            // Add intersection observer for scroll animations
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animation = 'fadeInUp 0.8s ease forwards';
                    }
                });
            }, observerOptions);

            // Observe elements for scroll animations
            document.querySelectorAll('.story-card, .contact-method, .control-section').forEach(el => {
                observer.observe(el);
            });
        });

        // Mobile menu toggle (if needed for smaller screens)
        function toggleMobileMenu() {
            const navLinks = document.querySelector('.nav-links');
            navLinks.classList.toggle('mobile-active');
        }

        // Add mobile menu styles
        const mobileStyles = `
            @media (max-width: 768px) {
                .nav-links {
                    display: none;
            position: absolute;
                    top: 100%;
            left: 0;
            width: 100%;
                    background: white;
                    flex-direction: column;
                    padding: 2rem;
                    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
                }
                
                .nav-links.mobile-active {
                    display: flex;
                }
                
                .customize-container {
                    grid-template-columns: 1fr;
                    gap: 2rem;
                }
                
                .contact-methods {
                    grid-template-columns: 1fr;
                }
                
                .hero h1 {
                    font-size: 2.5rem;
                }
                
                .hero .slogan {
                    font-size: 1.2rem;
                }
                
                .cta-button {
                    padding: 1rem 2rem;
                    font-size: 1rem;
                }
            }
        `;

        // Inject mobile styles
        const styleSheet = document.createElement('style');
        styleSheet.textContent = mobileStyles;
        document.head.appendChild(styleSheet);

        // Carousel logic
        let showcaseIndex = 0;
        function moveCarousel(dir) {
            const track = document.querySelector('.showcase-track');
            const cards = document.querySelectorAll('.product-card');
            const visible = Math.floor(document.querySelector('.showcase-carousel').offsetWidth / cards[0].offsetWidth);
            showcaseIndex += dir;
            if (showcaseIndex < 0) showcaseIndex = 0;
            if (showcaseIndex > cards.length - visible) showcaseIndex = cards.length - visible;
            track.style.transform = `translateX(-${showcaseIndex * (cards[0].offsetWidth + 32)}px)`;
        }
        setTimeout(() => moveCarousel(0), 200);

        // Section reveal on scroll
        function revealOnScroll() {
            document.querySelectorAll('.reveal').forEach(section => {
                const rect = section.getBoundingClientRect();
                if (rect.top < window.innerHeight - 80) {
                    section.classList.add('active');
                }
            });
        }
        window.addEventListener('scroll', revealOnScroll);
        setTimeout(revealOnScroll, 300);

        // Initialize products
        function initializeProducts() {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = '';
            
            productsData.forEach((product, index) => {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.setAttribute('data-category', product.category);
                card.style.setProperty('--card-index', index);
                
                card.innerHTML = `
                    <div class="product-image-wrapper">
                        <img src="https://source.unsplash.com/400x400/?eco,bag" alt="${product.name}" class="product-image">
                        <div class="product-badge">
                            <i class="fas fa-leaf"></i> Eco-friendly
                        </div>
                        <div class="product-actions">
                            <button class="action-btn" onclick="quickView(${product.id})">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn" onclick="toggleWishlist(${product.id})">
                                <i class="fas fa-heart"></i>
                            </button>
                            <button class="action-btn" onclick="shareProduct(${product.id})">
                                <i class="fas fa-share"></i>
                            </button>
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">
                            <i class="fas ${getCategoryIcon(product.category)}"></i> ${product.category}
                        </div>
                        <h3 class="product-title">${product.name}</h3>
                        <p class="product-description">${product.description}</p>
                        <div class="product-footer">
                            <div class="product-price">
                                ${product.price.toLocaleString()}đ
                                ${product.oldPrice ? `<span class="old-price">${product.oldPrice.toLocaleString()}đ</span>` : ''}
                            </div>
                            <button class="add-to-cart-btn" onclick="addToCart(${product.id})">
                                <i class="fas fa-shopping-cart"></i>
                                Thêm vào giỏ
                            </button>
                        </div>
                    </div>
                `;
                
                grid.appendChild(card);
            });
            
            updateProductsCount();
        }

        // Add new functions for wishlist and share
        function toggleWishlist(productId) {
            // Implement wishlist functionality
            showNotification('Đã thêm vào danh sách yêu thích!', 'success');
        }

        function shareProduct(productId) {
            // Implement share functionality
            if (navigator.share) {
                const product = productsData.find(p => p.id === productId);
                navigator.share({
                    title: product.name,
                    text: product.description,
                    url: window.location.href
                }).then(() => {
                    showNotification('Đã chia sẻ sản phẩm!', 'success');
                }).catch(console.error);
            } else {
                showNotification('Tính năng chia sẻ không được hỗ trợ trên trình duyệt này', 'info');
            }
        }

        // Add Quick View functionality
        function quickView(productId) {
            const product = productsData.find(p => p.id === productId);
            if (!product) return;

            const modal = document.getElementById('quickViewModal');
            const image = document.getElementById('quickViewImage');
            const title = document.getElementById('quickViewTitle');
            const price = document.getElementById('quickViewPrice');
            const desc = document.getElementById('quickViewDesc');

            image.src = `https://source.unsplash.com/400x400/?eco,bag`;
            title.textContent = product.name;
            price.textContent = `${product.price.toLocaleString()}đ`;
            desc.textContent = product.description;

            modal.style.display = 'block';
            setTimeout(() => modal.classList.add('active'), 10);
        }

        // Add a function to get category icons
        function getCategoryIcon(category) {
            const icons = {
                'tote': 'fa-shopping-bag',
                'drawstring': 'fa-shopping-basket',
                'mini': 'fa-gift',
                'premium': 'fa-star',
                'zip': 'fa-archive',
                'jumbo': 'fa-box',
                'combo': 'fa-boxes',
                'linen': 'fa-leaf'
            };
            return icons[category] || 'fa-shopping-bag';
        }

        // Filter products
        function filterProducts(category) {
            const products = document.querySelectorAll('.product-card');
            products.forEach(product => {
                if (category === 'all' || product.getAttribute('data-category') === category) {
                    product.style.display = 'block';
                } else {
                    product.style.display = 'none';
                }
            });
            updateProductsCount();
        }

        // Sort products
        function sortProducts(method) {
            const grid = document.getElementById('productsGrid');
            const products = Array.from(grid.children);
            
            products.sort((a, b) => {
                const priceA = parseInt(a.querySelector('.product-price').textContent.replace(/\D/g,''));
                const priceB = parseInt(b.querySelector('.product-price').textContent.replace(/\D/g,''));
                const nameA = a.querySelector('.product-title').textContent;
                const nameB = b.querySelector('.product-title').textContent;
                
                switch(method) {
                    case 'price-asc':
                        return priceA - priceB;
                    case 'price-desc':
                        return priceB - priceA;
                    case 'name-asc':
                        return nameA.localeCompare(nameB);
                    case 'name-desc':
                        return nameB.localeCompare(nameA);
                    default:
                        return 0;
                }
            });
            
            products.forEach(product => grid.appendChild(product));
        }

        // Update products count
        function updateProductsCount() {
            const visibleProducts = document.querySelectorAll('.product-card[style*="block"]').length || 
                                   document.querySelectorAll('.product-card:not([style*="none"])').length;
            document.getElementById('productsCount').textContent = visibleProducts;
        }

        // Event listeners for filtering and sorting
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize products
            initializeProducts();
            
            // Filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    filterProducts(this.getAttribute('data-category'));
                });
            });
            
            // Sort select
            document.getElementById('productSort').addEventListener('change', function() {
                sortProducts(this.value);
            });
        });

        // Replace 3D initialization with 2D preview handlers
        function initializePreview() {
            const bagBase = document.getElementById('bagBase');
            const handles = document.querySelectorAll('.bag-handle');
            
            // Update bag color
            function updatePreviewColor(color) {
                bagBase.style.background = color;
                handles.forEach(handle => {
                    handle.style.borderColor = color;
                });
            }
            
            // Make elements draggable
            function makeDraggable(element) {
                let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
                element.onmousedown = dragMouseDown;

                function dragMouseDown(e) {
                    e = e || window.event;
                    e.preventDefault();
                    // get the mouse cursor position at startup
                    pos3 = e.clientX;
                    pos4 = e.clientY;
                    document.onmouseup = closeDragElement;
                    document.onmousemove = elementDrag;
                }

                function elementDrag(e) {
                    e = e || window.event;
                    e.preventDefault();
                    // calculate the new cursor position
                    pos1 = pos3 - e.clientX;
                    pos2 = pos4 - e.clientY;
                    pos3 = e.clientX;
                    pos4 = e.clientY;
                    
                    // Set boundaries to keep within bag
                    const parentRect = bagBase.getBoundingClientRect();
                    const elemRect = element.getBoundingClientRect();
                    
                    let newTop = element.offsetTop - pos2;
                    let newLeft = element.offsetLeft - pos1;
                    
                    // Boundary checks
                    newTop = Math.max(0, Math.min(newTop, parentRect.height - elemRect.height));
                    newLeft = Math.max(0, Math.min(newLeft, parentRect.width - elemRect.width));
                    
                    // set the element's new position
                    element.style.top = newTop + "px";
                    element.style.left = newLeft + "px";
                    element.style.transform = 'none'; // Remove default transform
                }

                function closeDragElement() {
                    document.onmouseup = null;
                    document.onmousemove = null;
                }
            }

            // Make logo and text areas draggable
            makeDraggable(document.getElementById('logoArea'));
            makeDraggable(document.getElementById('textArea'));
            
            // Update logo preview
            function updateLogoPreview(dataUrl) {
                const logoPreview = document.getElementById('logoPreview');
                logoPreview.src = dataUrl;
                logoPreview.style.display = 'block';
            }
            
            // Update text preview
            function updateTextPreview(text, font) {
                const textPreview = document.getElementById('textPreview');
                textPreview.textContent = text;
                textPreview.style.fontFamily = font;
            }
            
            // Event listeners for customization
            document.querySelectorAll('.color-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    const color = this.getAttribute('data-color');
                    updatePreviewColor(color);
                });
            });

            document.getElementById('customColor').addEventListener('change', function() {
                updatePreviewColor(this.value);
                document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('active'));
            });

            document.getElementById('logoUpload').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        updateLogoPreview(event.target.result);
                        showNotification('Logo đã được tải lên!', 'success');
                    };
                    reader.readAsDataURL(file);
                }
            });

            document.getElementById('bagText').addEventListener('input', function() {
                updateTextPreview(this.value, document.getElementById('textFont').value);
            });

            document.getElementById('textFont').addEventListener('change', function() {
                updateTextPreview(document.getElementById('bagText').value, this.value);
            });
        }

        // Initialize preview when page loads or when switching to customize page
        document.addEventListener('DOMContentLoaded', function() {
            if (document.getElementById('customize').classList.contains('active')) {
                initializePreview();
            }
        });

        // Add animation for feature cards
        document.addEventListener('DOMContentLoaded', function() {
            const featureCards = document.querySelectorAll('.feature-card');
            featureCards.forEach((card, index) => {
                card.style.setProperty('--card-index', index);
            });
        });

        // FAQ Functionality
        document.querySelectorAll('.faq-question').forEach(question => {
            question.addEventListener('click', () => {
                const faqItem = question.parentElement;
                faqItem.classList.toggle('active');
            });
        });

        // Reviews Slider (if needed)
        // Add your slider initialization code here

        // Update addToCart function
        function addToCart(productId) {
            const modal = document.getElementById('contactModal');
            const loadingOverlay = modal.querySelector('.loading-overlay');
            
            // Show modal
            modal.style.display = 'block';
            setTimeout(() => {
                modal.classList.add('active');
                // Initialize particles
                initParticles();
            }, 10);
            
            // Simulate loading
            loadingOverlay.classList.add('active');
            setTimeout(() => {
                loadingOverlay.classList.remove('active');
            }, 1000);
        }

        // Add 3D and particle effects
        function initParticles() {
            const container = document.querySelector('.particles');
            const colors = ['#4a9b3e', '#6bb85f', '#2d4a3e'];
            
            function createParticle() {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // Random position
                const x = Math.random() * 100;
                const y = Math.random() * 100;
                particle.style.left = `${x}%`;
                particle.style.top = `${y}%`;
                
                // Random color
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                
                // Random size
                const size = Math.random() * 5 + 5;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                
                // Random animation
                const tx = (Math.random() - 0.5) * 200;
                const ty = (Math.random() - 0.5) * 200;
                particle.style.setProperty('--tx', `${tx}px`);
                particle.style.setProperty('--ty', `${ty}px`);
                
                particle.style.animation = `particleAnimation ${Math.random() * 2 + 1}s ease-out forwards`;
                
                container.appendChild(particle);
                
                // Remove particle after animation
                particle.addEventListener('animationend', () => {
                    particle.remove();
                });
            }
            
            // Create particles periodically
            setInterval(createParticle, 200);
        }

        // Add hover effect for contact methods
        document.querySelectorAll('.contact-method').forEach(method => {
            method.addEventListener('mousemove', (e) => {
                const rect = method.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                
                const angleX = (y - centerY) / 10;
                const angleY = (centerX - x) / 10;
                
                method.style.transform = `perspective(1000px) rotateX(${angleX}deg) rotateY(${angleY}deg) translateZ(10px)`;
            });
            
            method.addEventListener('mouseleave', () => {
                method.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) translateZ(0)';
            });
        });

        // Add 3D effect for social links
        document.querySelectorAll('.social-link').forEach(link => {
            link.addEventListener('mousemove', (e) => {
                const rect = link.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                
                const angleX = (y - centerY) / 5;
                const angleY = (centerX - x) / 5;
                
                link.style.transform = `perspective(1000px) rotateX(${angleX}deg) rotateY(${angleY}deg) translateZ(20px)`;
            });
            
            link.addEventListener('mouseleave', () => {
                link.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) translateZ(0)';
            });
        });

        // Close modal with 3D effect
        function closeContactModal() {
            const modal = document.getElementById('contactModal');
            const content = modal.querySelector('.contact-modal-content');
            
            content.style.transform = 'translate(-50%, -50%) rotateX(10deg) scale(0.9)';
            modal.classList.remove('active');
            
            setTimeout(() => {
                modal.style.display = 'none';
                content.style.transform = 'translate(-50%, -50%) rotateX(-10deg) scale(0.9)';
            }, 300);
        }

        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('contactModal');
            if (event.target === modal) {
                closeContactModal();
            }
        });

        // Add JavaScript for animations
        document.addEventListener('DOMContentLoaded', () => {
            // Parallax effect
            document.addEventListener('mousemove', (e) => {
                document.querySelectorAll('.parallax-item').forEach(item => {
                    const speed = item.getAttribute('data-speed') || 5;
                    const x = (window.innerWidth - e.pageX * speed) / 100;
                    const y = (window.innerHeight - e.pageY * speed) / 100;
                    item.style.transform = `translateX(${x}px) translateY(${y}px)`;
                });
            });

            // Impact numbers animation
            const impactNumbers = document.querySelectorAll('.impact-number');
            
            function animateNumber(element) {
                const target = parseInt(element.getAttribute('data-target'));
                const duration = 2000;
                const step = target / (duration / 16);
                let current = 0;
                
                const timer = setInterval(() => {
                    current += step;
                    element.textContent = Math.round(current).toLocaleString();
                    
                    if (current >= target) {
                        element.textContent = target.toLocaleString();
                        clearInterval(timer);
                    }
                }, 16);
            }

            // Intersection Observer for impact numbers
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        animateNumber(entry.target);
                        observer.unobserve(entry.target);
                    }
                });
            });

            impactNumbers.forEach(number => observer.observe(number));

            // Timeline animation
            const timelineItems = document.querySelectorAll('.timeline-item');
            
            const timelineObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateX(0)';
                    }
                });
            });

            timelineItems.forEach(item => {
                item.style.opacity = '0';
                item.style.transform = item.classList.contains('right') ? 'translateX(-50px)' : 'translateX(50px)';
                item.style.transition = 'all 0.5s ease';
                timelineObserver.observe(item);
            });

            // Blog cards hover effect
            document.querySelectorAll('.blog-card').forEach(card => {
                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    
                    const angleX = (y - centerY) / 20;
                    const angleY = (centerX - x) / 20;
                    
                    card.style.transform = `perspective(1000px) rotateX(${angleX}deg) rotateY(${angleY}deg) scale(1.05)`;
                });
                
                card.addEventListener('mouseleave', () => {
                    card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale(1)';
                });
            });
        });

        // Number counting animation
        const numberElements = document.querySelectorAll('.impact-number');
        
        const animateValue = (element, start, end, duration) => {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const currentValue = Math.floor(progress * (end - start) + start);
                element.textContent = new Intl.NumberFormat().format(currentValue);
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const element = entry.target;
                    const target = parseInt(element.getAttribute('data-target'));
                    element.classList.add('animate');
                    animateValue(element, 0, target, 2000);
                    observer.unobserve(element);
                }
            });
        }, {
            threshold: 0.5
        });

        numberElements.forEach(element => observer.observe(element));
    </script>
</body>
</html>
